@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* 1. 全局渲染优化 */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* 禁止整个页面的橡皮筋回弹，让 App 质感更强 */
    overscroll-behavior-y: none;
    /* 设置默认文本色和背景 */
    @apply text-ios-text-primary bg-ios-bg;
  }

  /* 2. 移除 iOS 点击高亮 (灰色遮罩) */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* 3. 修复 Input 自动填充时的背景色问题
     (防止浏览器默认的黄色/蓝色背景破坏玻璃拟态) */
  input:-webkit-autofill,
  input:-webkit-autofill:hover, 
  input:-webkit-autofill:focus, 
  input:-webkit-autofill:active{
      -webkit-background-clip: text;
      -webkit-text-fill-color: #1D1D1F;
      transition: background-color 5000s ease-in-out 0s;
      box-shadow: inset 0 0 20px 20px rgba(255,255,255,0);
  }
}

@layer components {
  /* 4. 标准玻璃拟态面板 (统一卡片风格) */
  .glass-panel {
    @apply bg-white/70 backdrop-blur-xl border border-white/40 shadow-glass transition-all duration-300;
  }
  
  /* 5. 玻璃拟态输入框 */
  .glass-input {
    @apply bg-gray-50/50 border-transparent focus:bg-white focus:border-primary-500 focus:ring-4 focus:ring-primary-500/20 transition-all duration-300 outline-none;
  }
}

@layer utilities {
  /* 6. 隐藏滚动条但保留滚动功能 (用于结果面板) */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  /* 7. iOS 经典的弹簧缓动曲线 */
  .ease-ios {
    transition-timing-function: cubic-bezier(0.25, 1, 0.5, 1);
  }
  
  /* 8. 强制硬件加速 (防止 Bottom Sheet 拖拽卡顿) */
  .gpu {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
  }

  /* 9. iPhone 底部安全区域适配 (用于 Bottom Sheet 底部 Padding) */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* 10. 移动端结果面板滚动优化 - 确保所有内容可滚动显示 */
  .mobile-results-container {
    -webkit-overflow-scrolling: touch; /* iOS 平滑滚动 */
    overflow-y: auto !important;
    overflow-x: hidden;
    min-height: 0 !important; /* 允许 flex 子元素缩小，必须设置 */
    max-height: none; /* 移除最大高度限制 */
    flex: 1 1 0% !important; /* 使用0%作为flex-basis，确保flex-grow正常工作 */
    position: relative; /* 确保定位上下文 */
    height: 0; /* flex布局技巧：设置height:0让flex正确计算 */
  }
}